# Worker identity + entrypoint
name = "ai-assassins-api"
main = "src/index.ts"
compatibility_date = "2026-02-15"

# Deploy to Cloudflare workers.dev for now (no custom domain route binding)
workers_dev = true
# route = "https://api.aiassassins.com/*" # Disabled for workers.dev-only deployment
# zone_id = "YOUR_ZONE_ID"              # Enable only when custom DNS zone is configured

# Non-secret runtime variables (safe to commit)
[vars]
OPENAI_MODEL = "gpt-4.1-mini"
FREE_BRIEFS_PER_DAY = "1"
REQUIRE_AUTH = "true"
ALLOWED_ORIGINS = "https://saintblack-ai.github.io"
PUBLIC_APP_URL = "https://saintblack-ai.github.io/Ai-Assassins"
STRIPE_PRICE_ID = ""
STRIPE_PRICE_ID_PRO = ""
STRIPE_PRICE_ID_ELITE = ""
STRIPE_PRICE_PRO = ""
STRIPE_PRICE_ELITE = ""
ENTERPRISE_DAILY_LIMIT = ""
BRIEF_TIMEZONE = "America/Chicago"
BRIEF_SEND_HHMM = "0700"
DAILY_ALERT_TO = ""

# KV namespaces used by the Worker
# USER_STATE: subscription/user profile state
[[kv_namespaces]]
binding = "USER_STATE"
id = "5b20a68249014767b229fc2284111a36"

# USAGE_STATE: daily usage counters for quota enforcement
[[kv_namespaces]]
binding = "USAGE_STATE"
id = "a748caf55c2d479c94fa8dfde604a2f3"

# REVENUE_LOG: billing/revenue event logs
[[kv_namespaces]]
binding = "REVENUE_LOG"
id = "cd21d7bb23da497daf3addcbf8ba01e1"

# LEADS: enterprise/contact lead capture
[[kv_namespaces]]
binding = "LEADS"
id = "22942df275bd4797b34b93224e8738c7"

# Cloudflare Worker telemetry
[observability]
enabled = true

[triggers]
# Daily Commander Mode trigger
crons = ["0 7 * * *"]

[[kv_namespaces]]
binding = "BRIEF_LOG"
id = "be5f592bf9cc4c56aed50479e67f20e0"

[[kv_namespaces]]
binding = "DAILY_BRIEF_LOG"
id = "dd173538e82644268e037befa8836ae4"

[[kv_namespaces]]
binding = "COMMAND_LOG"
id = "59ba027565954a76b9fb90c7e4f714fa"
